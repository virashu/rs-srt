<!doctype html>
<html>
    <head>
        <link rel="stylesheet" href="style.css" />
        <script src="https://cdn.jsdelivr.net/npm/hls.js@1"></script>
    </head>
    <body>
        <div class="container">
            <div class="player">
                <video id="video" autoplay=""></video>

                <div class="controls">
                    <button class="play">PP</button>
                </div>
            </div>
        </div>

        <script>
            const video = document.getElementById("video");
            const videoSrc = "http://127.0.0.1:3000/api/hls/stream.m3u8";

            if (Hls.isSupported()) {
                const hls = new Hls({ debug: true });
                hls.loadSource(videoSrc);
                hls.attachMedia(video);
            } else if (video.canPlayType("application/vnd.apple.mpegurl")) {
                video.src = videoSrc;
            }

            const play = document.querySelector(".play");

            function playPauseMedia() {
                if (video.paused) {
                    // live stream
                    video.currentTime = video.duration;
                    video.play();
                } else {
                    video.pause();
                }
            }

            play.addEventListener("click", playPauseMedia);
        </script>
    </body>
</html>
